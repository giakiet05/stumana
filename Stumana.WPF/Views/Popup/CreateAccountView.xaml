<UserControl x:Class="Stumana.WPF.Views.Popup.CreateAccountView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             xmlns:helpers="clr-namespace:Stumana.WPF.Helpers"
             mc:Ignorable="d"
             d:DesignHeight="800" d:DesignWidth="700">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Stumana.WPF;component/ResourceXAML/Styles/CommonStyles.xaml" />
            </ResourceDictionary.MergedDictionaries>
            
            <!-- Style tùy chỉnh dựa trên MaterialDesignFloatingHintTextBox -->
            <Style x:Key="CustomFloatingHintTextBox" TargetType="TextBox"
                   BasedOn="{StaticResource MaterialDesignFloatingHintTextBox}">
                <Setter Property="materialDesign:HintAssist.IsFloating" Value="True" />
                <Setter Property="materialDesign:HintAssist.Foreground"
                        Value="{DynamicResource MaterialDesignCheckBoxOff}" />
                <Setter Property="materialDesign:TextFieldAssist.TextFieldCornerRadius" Value="4" />
                <Setter Property="materialDesign:TextFieldAssist.UnderlineBrush"
                        Value="{DynamicResource MaterialDesignDivider}" />
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>

    <Border Width="600" Height="800" Background="White" Padding="20" CornerRadius="20" BorderThickness="2" BorderBrush="#E0E0E0">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center"
                        Width="432" Height="Auto"
                        Orientation="Vertical">
                <TextBlock Text="Tạo tài khoản"
                           FontFamily="pack://application:,,,/Resource/Font/#Poppins Medium"
                           FontSize="40"
                           Style="{StaticResource MaterialDesignHeadline1TextBlock}"
                           Foreground="{DynamicResource PrimaryHueMidBrush}"
                           HorizontalAlignment="Center"
                           Margin="0,0,0,20" />

                <StackPanel Orientation="Vertical" Width="430" Height="Auto" Margin="0 10 0 0">
                    <!-- Email TextBox -->
                    <TextBlock Text="Email"
                               FontWeight="Medium" FontSize="25"
                               Width="Auto" Height="Auto"
                               HorizontalAlignment="Left"
                               Foreground="#999999"
                               FontFamily="Poppins" />
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Height="88.5">
                        <materialDesign:PackIcon Kind="Email"
                                                 Width="50" Height="50"
                                                 Foreground="#000842"
                                                 Margin="0,20,10,0" />
                        <TextBox materialDesign:HintAssist.Hint="Nhập email của bạn"
                                 Width="361" Foreground="#000842"
                                 FontFamily="pack://application:,,,/Resource/Font/#Poppins Regular"
                                 FontSize="20" Background="{DynamicResource MaterialDesignPaper}" Padding="10"
                                 Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                 materialDesign:TextFieldAssist.UnderlineBrush="Black"
                                 BorderThickness="0"
                                 Text="{Binding Email, UpdateSourceTrigger=PropertyChanged}"  />
                    </StackPanel>

                    <TextBlock
                        Margin="0, 0, 0, 10"
                        Text="{Binding ErrorEmailText}"
                        FontFamily="pack://application:,,,/Resource/Font/#Poppins Medium"
                        FontSize="15"
                        Foreground="Red" 
                        Visibility="{Binding InvalidEmail, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                    <!-- Username TextBox -->
                    <TextBlock Text="Tài khoản" FontWeight="Medium"
                               FontSize="25"
                               HorizontalAlignment="Left"
                               Foreground="#999999"
                               FontFamily="Poppins" />
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Height="88.5">
                        <materialDesign:PackIcon Kind="User"
                                                 Width="50" Height="50"
                                                 Foreground="#000842"
                                                 Margin="0,20,10,0" />
                        <TextBox x:Name="tbUsername" materialDesign:HintAssist.Hint="Nhập tên người dùng"
                                 Width="361"
                                 Foreground="#000842"
                                 FontFamily="pack://application:,,,/Resource/Font/#Poppins Regular"
                                 FontSize="20"
                                 Background="{DynamicResource MaterialDesignPaper}"
                                 Padding="10"
                                 Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                 materialDesign:TextFieldAssist.UnderlineBrush="Black"
                                 BorderThickness="0"
                                 Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>

                    <TextBlock
                        Margin="0, 0, 0, 10"
                        Text="{Binding ErrorUsernameText}"
                        FontFamily="pack://application:,,,/Resource/Font/#Poppins Medium"
                        FontSize="15"
                        Foreground="Red" 
                        Visibility="{Binding InvalidUsername, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                    <!-- Password TextBox -->
                    <TextBlock Text="Mật khẩu"
                               FontWeight="Medium" FontSize="25"
                               HorizontalAlignment="Left"
                               Foreground="#999999"
                               FontFamily="Poppins" />
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Height="88.5">
                        <materialDesign:PackIcon Kind="Password"
                                                 Width="50" Height="50"
                                                 Foreground="#000842"
                                                 Margin="0,20,10,0" />
                        <PasswordBox x:Name="pbPasswordRegis" 
                                     materialDesign:HintAssist.Hint="Nhập mật khẩu"
                                     Width="361" Foreground="#000842" FontSize="20"
                                     FontFamily="pack://application:,,,/Resource/Font/#Poppins Regular"
                                     Background="{DynamicResource MaterialDesignPaper}" Padding="10"
                                     Style="{StaticResource MaterialDesignFloatingHintRevealPasswordBox}"
                                     materialDesign:TextFieldAssist.UnderlineBrush="Black"
                                     BorderThickness="0"
                                     helpers:PasswordBoxHelper.BoundPassword="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                     helpers:PasswordBoxHelper.BindPassword="True"/>
                    </StackPanel>

                    <TextBlock Margin="0, 0, 0, 10"
                               Text="Mật khẩu không hợp lệ"
                               FontFamily="pack://application:,,,/Resource/Font/#Poppins Medium"
                               FontSize="15"
                               Foreground="Red" 
                               Visibility="{Binding InvalidPassword, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                    <!-- Confirm Password TextBox -->
                    <TextBlock Text="Xác nhận mật khẩu"
                               FontWeight="Medium"
                               FontSize="25"
                               HorizontalAlignment="Left"
                               Foreground="#999999"
                               FontFamily="Poppins" />
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Height="88.5">
                        <materialDesign:PackIcon Kind="Password"
                                                 Width="50" Height="50"
                                                 Foreground="#000842"
                                                 Margin="0,20,10,0" />
                        <PasswordBox x:Name="pbPasswordRegisConfirm"
                                     materialDesign:HintAssist.Hint="Xác nhận lại mật khẩu"
                                     Width="361" Foreground="#000842" FontSize="20"
                                     FontFamily="pack://application:,,,/Resource/Font/#Poppins Regular"
                                     Background="{DynamicResource MaterialDesignPaper}" Padding="10"
                                     Style="{StaticResource MaterialDesignFloatingHintRevealPasswordBox}"
                                     materialDesign:TextFieldAssist.UnderlineBrush="Black"
                                     BorderThickness="0"
                                     helpers:PasswordBoxHelper.BoundPassword="{Binding ConfirmPassword, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                     helpers:PasswordBoxHelper.BindPassword="True" />
                    </StackPanel>
                </StackPanel>

                <TextBlock Margin="0, 0, 0, 10"
                           Text="Mật khẩu không khớp"
                           FontFamily="pack://application:,,,/Resource/Font/#Poppins Medium"
                           FontSize="15"
                           Foreground="Red"
                           Visibility="{Binding InvalidConfirmPassword, Converter={StaticResource BooleanToVisibilityConverter}}"/>

                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,0,0,0">
                    <Button Margin="0 10 10 0"
                            VerticalAlignment="Center"
                            Width="200" Height="53"
                            Background="#0C21C1"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            materialDesign:ButtonAssist.CornerRadius="32"
                            Command="{Binding CreateAccountCommand}">
                        <TextBlock HorizontalAlignment="Center"
                                   Width="145" Height="26"
                                   FontFamily="Poppins"
                                   FontWeight="Medium"
                                   FontSize="20"
                                   Text="Tạo tài khoản"
                                   TextAlignment="Center"
                                   Foreground="Snow" Cursor="Hand" />
                    </Button>
                    
                    <Button Margin="10 10 0 0"
                            VerticalAlignment="Center"
                            Width="120" Height="53"
                            Background="#999999"
                            Style="{StaticResource MaterialDesignRaisedButton}"
                            materialDesign:ButtonAssist.CornerRadius="32"
                            Command="{Binding CancelCommand}">
                        <TextBlock HorizontalAlignment="Center"
                                   Width="80" Height="26"
                                   FontFamily="Poppins"
                                   FontWeight="Medium"
                                   FontSize="20"
                                   Text="Hủy"
                                   TextAlignment="Center"
                                   Foreground="Snow" Cursor="Hand" />
                    </Button>
                </StackPanel>

            </StackPanel>
        </Grid>
    </Border>
</UserControl> 